<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  		PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="photofile">
	<resultMap type="fileDto" id="fileMap">
		<result property="f_no" column="F_NO"></result>
		<result property="b_no" column="B_NO"></result>
		<result property="f_name" column="F_NAME"></result>
		<result property="f_url" column="F_URL"></result>
		<result property="photo_ismain" column="Photo_IsMain"></result>
	</resultMap>
	
	<insert id="insertImage" parameterType="fileDto">
		INSERT INTO PHOTO_FILE
		VALUES ( PHOTOFILESEQ.NEXTVAL, (SELECT MAX(B_NO) FROM PHOTO_BOARD), #{f_name}, #{f_size}, #{f_url}, DEFAULT )
	</insert>
	
	<update id="updateMainPhoto" parameterType="fileDto">
		UPDATE PHOTO_FILE
		SET PHOTO_ISMAIN = 'Y'
		WHERE F_NO = (SELECT MIN(F_NO) FROM PHOTO_FILE WHERE B_NO = #{b_no})
	</update>





</mapper>